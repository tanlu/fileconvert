import{c as b}from"./config-8adb8f72.js";import{d as T,_ as L,r as a,o as _,c as f,k as r,l as c,a as s,t as n,z as w,F as te,f as se,E,n as M,g as y,p as j,q as P,s as q,w as K,v as H,j as ie}from"./vendor-f6f18e65.js";import{b as oe,d as V,v as J,r as ne}from"./uapi-36a28288.js";import{s as C,aL as I,b4 as O,b5 as re,b6 as ae,a as D,a9 as X,aG as S,aH as N,bg as B,c as A,t as k,bh as Y,bi as W,bc as le,h as ce,i as Q,bf as de}from"./header-9cdc9e16.js";import{l as me}from"./LoginHeader-2fea9369.js";import{v as _e}from"./layout-9f15c196.js";import"./libs-250e5f01.js";import"./mainTopSetting-c285896d.js";import"./sapi-65078bb6.js";import"./user-store-a4f4557a.js";import"./CommonTooltipBlack-dc42593b.js";const ue=T({props:{hasKo:{type:Boolean,default:!1}},data(){return{koCheckout:{fourteen:!1,agreement:!1,privacyPolicy:!1,information:!1}}},computed:{v3Host(){return b.macro.V3_MAIN_DOMAIN},v4Host(){return b.macro.CAMSCANNER_QRCODE_HOST}},watch:{koCheckout:{immediate:!0,handler(e){this.hasKo&&e.fourteen&&e.agreement&&e.privacyPolicy&&e.information?this.$emit("koCheckout",!0):this.$emit("koCheckout",!1)},deep:!0}},created(){},methods:{}});const pe={class:"main agreementCheckout"},he=["innerHTML"],ge=["innerHTML"],fe=["innerHTML"];function be(e,t,i,o,u,g){const m=a("el-checkbox");return _(),f("div",pe,[r(m,{modelValue:e.koCheckout.fourteen,"onUpdate:modelValue":t[0]||(t[0]=l=>e.koCheckout.fourteen=l)},{default:c(()=>[s("span",null,n(e.$t("cs_620_korea_16")),1)]),_:1},8,["modelValue"]),r(m,{modelValue:e.koCheckout.agreement,"onUpdate:modelValue":t[1]||(t[1]=l=>e.koCheckout.agreement=l)},{default:c(()=>[s("span",{innerHTML:e.$t("cs_620_korea_02",[`<a target='_blank' href='${e.v3Host}/app/service?language=${e.$i18n.locale}'>${e.$t("web_3_sign_service")}</a>`])},null,8,he)]),_:1},8,["modelValue"]),r(m,{modelValue:e.koCheckout.privacyPolicy,"onUpdate:modelValue":t[2]||(t[2]=l=>e.koCheckout.privacyPolicy=l)},{default:c(()=>[s("span",{innerHTML:e.$t("cs_620_korea_02",[`<a target='_blank' href='${e.v3Host}/web/privacy?language=${e.$i18n.locale}'>${e.$t("web_3_sign_privacy")}</a>`])},null,8,ge)]),_:1},8,["modelValue"]),r(m,{modelValue:e.koCheckout.information,"onUpdate:modelValue":t[3]||(t[3]=l=>e.koCheckout.information=l)},{default:c(()=>[s("span",{innerHTML:e.$t("cs_620_korea_02",[`<a target='_blank' href='/informedConsent'>${e.$t("cs_620_korea_01")}</a>`])},null,8,fe)]),_:1},8,["modelValue"])])}const Z=L(ue,[["render",be],["__scopeId","data-v-9331ab5a"]]),we=T({components:{agreementCheckout:Z},data:function(){return{vcodeText:this.$t("web_3_register_codebtn"),mobileForm:{verifyCode:"",account:"",password:"",checked:!1},verifyMsg:"",robust:"",loginStep:"step_first",areaMap:[],areaCode:"",clickSendVcode:!1,passRobust:!1,errMsg:"",client_id:"",captureObject:null,loginErrorShow:!1,timeIntercal:0}},watch:{areaCode(e){e&&(C("area_code",e,I()*365),O())}},props:{type:{type:String,default:""},hasKo:{type:Boolean,default:!1}},computed:{v3Host(){return b.macro.V3_MAIN_DOMAIN},v4Host(){return b.macro.CAMSCANNER_QRCODE_HOST}},created(){this.areaMap=re(this.$i18n.locale),this.areaCode=ae()[this.$i18n.locale].split(",")[0],this.client_id=D("client_id")?D("client_id"):"",this.client_id||(this.client_id=X(),C("client_id",this.client_id,new Date().getTime()+60*1e3*60*24*365))},beforeUnmount(){this.timeIntercal&&clearInterval(this.timeIntercal)},methods:{async initGt(e,t){const i=this;window.initGeetest({gt:e.gt,challenge:e.challenge,new_capture:!0,product:"bind",lang:i.$i18n.locale,https:!0},function(o){o.onReady(function(){i.captureObject=o,i.captureObject.verify()}).onSuccess(function(){const u=i.captureObject.getValidate(),g={};Object.keys(u).map(m=>g["jy_"+m]=u[m]),t(Object.assign(g,{jy_old_challenge:e.challenge}))}).onError(function(){})})},gtsendVcode(e={}){const t=Object.assign(e,{mobile:this.mobileForm.account,area_code:this.areaCode,reason:"register_mobile",language:navigator.language.toLocaleLowerCase(),timestamp:new Date().getTime()});t.sign=S(N(t)),t.sign_type="md5",oe(t).then(i=>{i.data&&i.data.success===1&&i.ret===10202?this.initGt(i.data,o=>{this.gtsendVcode(o)}):this.sendSuccess()}).catch(i=>{throw i.xerrcode&&(this.errMsg=this.$t("web_3_register_code_sendfailed")),i})},toLogin(){this.type?this.$emit("checkLogin"):this.$router.push("/login")},resetForm(){this.$refs.ruleForm.resetFields()},koCheckout(e){this.mobileForm.checked=e},async getVcode(e){if(!W().test(this.mobileForm.account)){this.errMsg=this.$t("web_3_register_worryphone");return}try{C("account",this.mobileForm.account,I()*365),await O();const o=await V({mobile:this.mobileForm.account,area_code:this.areaCode});if(!o||!o.ret){this.errMsg=this.$t("web_3_registeredphone");return}}catch(o){console.log("err",o)}this.errMsg="",this.clickSendVcode=!0,this.$refs[e].validateField("account",o=>{if(this.clickSendVcode=!1,o)this.gtsendVcode();else return!1})},sendSuccess(){let e=60;const t=this;t.timeIntercal=window.setInterval(()=>{t.vcodeText=(e--).toString(),e===-1&&(t.vcodeText=this.$t("web_3_register_codebtn"),e=60,clearInterval(t.timeIntercal))},1e3)},queryRegister(){this.errMsg="",V({mobile:this.mobileForm.account,area_code:this.areaCode}).then(e=>{e&&e.ret?this.registerMobile():this.errMsg=this.$t("web_3_registeredphone")}).catch(e=>{throw e.status===406&&e.xerrcode==="201"&&this.registerMobile(),e})},async submitMobile(e){const t=W();if(!t.test(this.mobileForm.account)){this.errMsg=this.$t("web_3_register_worryphone");return}try{const i=await V({mobile:this.mobileForm.account,area_code:this.areaCode});if(!i||!i.ret){this.errMsg=this.$t("web_3_registeredphone");return}}catch(i){console.log("err",i)}if(!this.mobileForm.password.trim()){this.errMsg=this.$t("web_3_sign_psw");return}if(this.hasKo&&!B(this.mobileForm.password,this)){this.errMsg=this.$t("cs_620_korea_14");return}if(this.mobileForm.password.length<6){this.errMsg=this.$t("web_3_register_pswlength");return}if(!this.mobileForm.verifyCode){this.errMsg=this.$t("web_3_register_code");return}if(this.clickSendVcode){this.errMsg=this.$t("web_3_register_code");return}if(!t.test(this.mobileForm.verifyCode)&&this.clickSendVcode){this.errMsg=this.$t("web_3_register_code");return}if(!this.mobileForm.checked){this.hasKo?this.errMsg=this.$t("cs_620_check_before"):this.errMsg=this.$t("web_3_register_unchecked");return}this.errMsg="",this.$refs[e].validate(i=>{if(i)this.queryRegister();else return!1})},registerMobile(e={}){let t={api_domain:b.api.UAPI,password:S(this.mobileForm.password,"_IntSig",16),mobile:this.mobileForm.account,timestamp:new Date().getTime(),language:this.$i18n.locale,vcode:this.mobileForm.verifyCode,reason:"register_mobile",area_code:this.areaCode,client:"webcs_WEB",client_app:`web_camscanner@${b.appVersion}`,client_id:this.client_id,jy_mobile:this.mobileForm.account};t=Object.assign(e,t),t.sign=S(N(t)),t.sign_type="md5",J(t).then(i=>{i.data&&i.data.success===1&&i.ret===10202?this.initGt(i.data,o=>{this.registerMobile(o)}):(A.emit("toast",{msg:this.$t("web_3_register_success"),type:"success"}),this.$router.push("/login"))}).catch(i=>{i.xerrcode&&(k("signin","signup_active","signup_failed"),this.errMsg=this.$t("web_3_login_invalidcode"))})},emailBack(){this.loginErrorShow=!1,this.loginStep="step_first"},checkPwd(e){this.hasKo?this.robust=B(e,this):this.robust=Y(e,this),this.robust?this.passRobust=!0:this.passRobust=!1},accountEntry(){C("account",this.mobileForm.account,I()*365),O()}}});const F=e=>(P("data-v-ed4cf39a"),e=e(),q(),e),$e={class:"mobile_register form_wrap"},ve={class:"form-item",style:{margin:"22px 0"}},ye=F(()=>s("input",{type:"username",style:{display:"none"}},null,-1)),ke={class:"form-item"},Ce=F(()=>s("input",{type:"password",style:{display:"none"}},null,-1)),Fe={class:"robust_line"},Me=F(()=>s("i",null,null,-1)),Ee={class:"robust_line"},Ve=F(()=>s("i",null,null,-1)),Se={class:"robust_line"},Ie=F(()=>s("i",null,null,-1)),Te={class:"form-item verify"},Le={class:"form-clause"},Re=["innerHTML"],Ke={key:1,class:"err-msg"},He={class:"form-btn"},Oe={class:"register_footer"},je={class:"division_line"},De=F(()=>s("i",null,null,-1)),Ne=F(()=>s("i",null,null,-1));function Be(e,t,i,o,u,g){const m=a("el-option"),l=a("el-select"),p=a("el-input"),$=a("el-form-item"),v=a("el-button"),U=a("agreementCheckout"),G=a("el-checkbox"),h=a("WarningFilled"),x=a("el-icon"),ee=a("el-form");return _(),w(ee,{model:e.mobileForm,ref:"ruleForm","label-width":"100px",class:"demo-ruleForm"},{default:c(()=>[s("div",$e,[s("div",ve,[r(l,{modelValue:e.areaCode,"onUpdate:modelValue":t[0]||(t[0]=d=>e.areaCode=d),placeholder:e.$t("cs_648_login_select")},{default:c(()=>[(_(!0),f(te,null,se(e.areaMap,d=>(_(),w(m,{key:d.index,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),r($,{class:"phone",prop:"account"},{default:c(()=>[ye,r(p,{name:"mobile",autocomplete:"new-password",onKeyup:t[1]||(t[1]=E(d=>e.submitMobile("ruleForm"),["enter","native"])),onBlurCapture:e.accountEntry,modelValue:e.mobileForm.account,"onUpdate:modelValue":t[2]||(t[2]=d=>e.mobileForm.account=d),modelModifiers:{trim:!0},placeholder:e.$t("web_3_register_mobileinput")},null,8,["onBlurCapture","modelValue","placeholder"])]),_:1}),r($,{prop:"password"},{default:c(()=>[s("div",ke,[Ce,r(p,{onInput:e.checkPwd,autocomplete:"new-password",placeholder:e.$t("web_3_register_psw"),onKeyup:t[3]||(t[3]=E(d=>e.submitMobile("ruleForm"),["enter","native"])),modelValue:e.mobileForm.password,"onUpdate:modelValue":t[4]||(t[4]=d=>e.mobileForm.password=d),"show-password":""},null,8,["onInput","placeholder","modelValue"])])]),_:1}),e.passRobust?(_(),f("div",{key:0,class:M(["password_robust",e.robust])},[s("div",Fe,[Me,s("span",null,n(e.$t("web_3_psw_weak")),1)]),s("div",Ee,[Ve,s("span",null,n(e.$t("web_3_psw_middle")),1)]),s("div",Se,[Ie,s("span",null,n(e.$t("web_3_psw_safe")),1)])],2)):y("",!0),r($,{prop:"verifyCode"},{default:c(()=>[s("div",Te,[r(p,{autocomplete:"new-password",style:{width:"200px"},onKeyup:t[5]||(t[5]=E(d=>e.submitMobile("ruleForm"),["enter","native"])),modelValue:e.mobileForm.verifyCode,"onUpdate:modelValue":t[6]||(t[6]=d=>e.mobileForm.verifyCode=d),placeholder:e.$t("web_3_register_code")},null,8,["modelValue","placeholder"]),r(v,{onClick:t[7]||(t[7]=d=>e.getVcode("ruleForm")),disabled:e.vcodeText!=e.$t("web_3_register_codebtn")},{default:c(()=>[j(n(e.vcodeText),1)]),_:1},8,["disabled"])])]),_:1}),r($,{class:"clause",prop:"checked"},{default:c(()=>[s("div",Le,[e.hasKo?(_(),w(U,{key:0,onKoCheckout:e.koCheckout,hasKo:e.hasKo},null,8,["onKoCheckout","hasKo"])):(_(),w(G,{key:1,modelValue:e.mobileForm.checked,"onUpdate:modelValue":t[8]||(t[8]=d=>e.mobileForm.checked=d)},{default:c(()=>[s("span",{innerHTML:e.$t("web_3_register_tip",["<span class='desk_open' href="+e.v3Host+"/app/service?language="+e.$i18n.locale+">"+e.$t("web_3_sign_service")+"</span>","<span class='desk_open' href="+e.v3Host+"/web/privacy?language="+e.$i18n.locale+">"+e.$t("web_3_sign_privacy")+"</span>"])},null,8,Re)]),_:1},8,["modelValue"]))])]),_:1}),e.errMsg?(_(),f("div",Ke,[r(x,null,{default:c(()=>[r(h)]),_:1}),j(n(e.errMsg),1)])):y("",!0),s("div",He,[s("div",{class:"btn_green login_btn_bottom",onClick:t[9]||(t[9]=d=>e.submitMobile("ruleForm"))},n(e.$t("web_3_register_btn")),1)])]),s("div",Oe,[s("div",je,[De,s("span",null,n(e.$t("web_3_register_excistaccount")),1),Ne]),s("a",{onClick:t[10]||(t[10]=(...d)=>e.toLogin&&e.toLogin(...d))},n(e.$t("web_3_register_loginnow")),1)])]),_:1},8,["model"])}const Ae=L(we,[["render",Be],["__scopeId","data-v-ed4cf39a"]]),Ue=T({components:{agreementCheckout:Z},data:function(){return{emailForm:{account:"",password:"",checked:!1},emailVerify:"",loginStep:"step_first",createdEmailError:!1,autoLogin:!1,checked:!1,robust:"",passRobust:!1,errMsg:"",loginErrorShow:!1}},props:{type:{type:String,default:""},hasKo:{type:Boolean,default:!1}},computed:{v3Host(){return b.macro.V3_MAIN_DOMAIN}},methods:{koCheckout(e){this.emailForm.checked=e},toLogin(){this.type?this.$emit("checkLogin"):this.$router.push("/login")},resetForm(){this.$refs.emailForm.resetFields()},createdEmail(){this.emailVerify||(this.createdEmailError=!0)},checkPwd(e){this.hasKo?this.robust=B(e,this):this.robust=Y(e,this),this.robust?this.passRobust=!0:this.passRobust=!1},async submitEmail(e){if(C("account",this.emailForm.account,I()*365),await O(),le().test(this.emailForm.account))try{const o=await V({email:this.emailForm.account});if(!o||!o.ret){this.errMsg=this.$t("web_3_registeredemail");return}}catch(o){o.status===406&&o.xerrcode==="201"&&console.log("Not Register")}else{this.errMsg=this.$t("web_3_register_worryemail");return}if(!this.emailForm.password.trim()){this.errMsg=this.$t("web_3_sign_psw");return}if(this.hasKo&&!B(this.emailForm.password,this)){this.errMsg=this.$t("cs_620_korea_14");return}if(this.emailForm.password.length<6){this.errMsg=this.$t("web_3_register_pswlength");return}if(!this.emailForm.checked){this.hasKo?this.errMsg=this.$t("cs_620_check_before"):this.errMsg=this.$t("web_3_register_unchecked");return}const i=this;this.errMsg="",this.$refs[e].validate(o=>{if(o)i.queryEmail();else return!1})},queryEmail(){const e=this;this.errMsg="",V({email:this.emailForm.account}).then(t=>{t&&t.ret?A.emit("toast",{msg:t.msg}):this.errMsg=this.$t("web_3_registeredemail")}).catch(t=>{t.status===406&&t.xerrcode==="201"&&(this.$parent.emailStep(),C("account",e.emailForm.account,I()*365))})},emailBack(){this.loginErrorShow=!1,this.loginStep="step_first"}}});const R=e=>(P("data-v-375bea9e"),e=e(),q(),e),Ge={class:"email_register form_wrap"},Pe={class:"form-item"},qe={class:"form-item"},ze={class:"robust_line"},We=R(()=>s("i",null,null,-1)),Qe={class:"robust_line"},Je=R(()=>s("i",null,null,-1)),Xe={class:"robust_line"},Ye=R(()=>s("i",null,null,-1)),Ze={class:"form-clause"},xe=["innerHTML"],et={key:1,class:"err-msg"},tt={class:"register_footer"},st={class:"division_line"},it=R(()=>s("i",null,null,-1)),ot=R(()=>s("i",null,null,-1));function nt(e,t,i,o,u,g){const m=a("el-input"),l=a("el-form-item"),p=a("agreementCheckout"),$=a("el-checkbox"),v=a("WarningFilled"),U=a("el-icon"),G=a("el-form");return _(),w(G,{model:e.emailForm,ref:"emailForm","label-width":"100px",class:"demo-emailForm"},{default:c(()=>[s("div",Ge,[r(l,{label:"",prop:"account"},{default:c(()=>[s("div",Pe,[r(m,{autocomplete:"new-password",placeholder:e.$t("web_3_register_emailinput"),onKeyup:t[0]||(t[0]=E(h=>e.submitEmail("emailForm"),["enter","native"])),autofocus:!0,modelValue:e.emailForm.account,"onUpdate:modelValue":t[1]||(t[1]=h=>e.emailForm.account=h),modelModifiers:{trim:!0}},null,8,["placeholder","modelValue"])])]),_:1}),r(l,{label:"",prop:"password",style:{"margin-bottom":"0"}},{default:c(()=>[s("div",qe,[r(m,{autocomplete:"new-password",name:"email",onInput:e.checkPwd,placeholder:e.$t("web_3_register_psw"),modelValue:e.emailForm.password,"onUpdate:modelValue":t[2]||(t[2]=h=>e.emailForm.password=h),onKeyup:t[3]||(t[3]=E(h=>e.submitEmail("emailForm"),["enter","native"])),"show-password":""},null,8,["onInput","placeholder","modelValue"])])]),_:1}),e.passRobust?(_(),f("div",{key:0,class:M(["password_robust",e.robust])},[s("div",ze,[We,s("span",null,n(e.$t("web_3_psw_weak")),1)]),s("div",Qe,[Je,s("span",null,n(e.$t("web_3_psw_middle")),1)]),s("div",Xe,[Ye,s("span",null,n(e.$t("web_3_psw_safe")),1)])],2)):y("",!0),r(l,{prop:"checked",class:"email-clause"},{default:c(()=>[s("div",Ze,[e.hasKo?(_(),w(p,{key:0,onKoCheckout:e.koCheckout,hasKo:e.hasKo},null,8,["onKoCheckout","hasKo"])):(_(),w($,{key:1,modelValue:e.emailForm.checked,"onUpdate:modelValue":t[4]||(t[4]=h=>e.emailForm.checked=h)},{default:c(()=>[s("span",{innerHTML:e.$t("web_3_register_tip",["<span class='desk_open' href="+e.v3Host+"/app/service?language="+e.$i18n.locale+">"+e.$t("web_3_sign_service")+"</span>","<span class='desk_open' href="+e.v3Host+"/web/privacy?language="+e.$i18n.locale+">"+e.$t("web_3_sign_privacy")+"</span>"])},null,8,xe)]),_:1},8,["modelValue"]))])]),_:1}),e.errMsg?(_(),f("div",et,[r(U,null,{default:c(()=>[r(v)]),_:1}),j(n(e.errMsg),1)])):y("",!0),r(l,null,{default:c(()=>[s("div",{class:"btn_green login_btn_bottom",onClick:t[5]||(t[5]=h=>e.submitEmail("emailForm"))},n(e.$t("web_3_nextstep")),1)]),_:1})]),s("div",tt,[s("div",st,[it,s("span",null,n(e.$t("web_3_register_excistaccount")),1),ot]),s("a",{onClick:t[6]||(t[6]=(...h)=>e.toLogin&&e.toLogin(...h))},n(e.$t("web_3_register_loginnow")),1)])]),_:1},8,["model"])}const rt=L(Ue,[["render",nt],["__scopeId","data-v-375bea9e"]]),at=T({components:{},data:function(){return{vcodeText:this.$t("web_3_register_codebtn"),emailForm:{account:"",password:"",checked:!1},emailVerify:"",createdEmailError:!1,regInterval:0,verifyMsg:"",client_id:"",captureObject:null,loginErrorShow:!1,timeIntercal:0}},computed:{},created(){this.emailForm=this.$parent.getEmailForm(),this.client_id=D("client_id")?D("client_id"):"",this.client_id||(this.client_id=X(),C("client_id",this.client_id,new Date().getTime()+60*1e3*60*24*365)),this.regInterval=window.setInterval(this.checkEmailReg,1e3),this.registerEmail()},beforeUnmount(){this.timeIntercal&&clearInterval(this.timeIntercal),this.regInterval&&clearInterval(this.regInterval)},methods:{async initGt(e,t){const i=this;window.initGeetest({gt:e.gt,challenge:e.challenge,new_capture:!0,product:"bind",lang:i.$i18n.locale,https:!0},function(o){o.onReady(function(){var u;i.captureObject=o,(u=i.captureObject)==null||u.verify()}).onSuccess(function(){var m;const u=(m=i.captureObject)==null?void 0:m.getValidate(),g={};Object.keys(u).map(l=>g["jy_"+l]=u[l]),t(Object.assign(g,{jy_old_challenge:e.challenge}))}).onError(function(){})})},registerEmail(e={}){const t=this.$parent.getEmailForm();let i={email:t.account,password:S(t.password,"_IntSig",16),language:this.$i18n.locale,from:"web",app_name:"web_camscanner",jy_email:t.account};i=Object.assign(e,i),i.sign=S(N(i)),i.sign_type="md5",ne(i).then(o=>{o.data&&o.data.success===1&&o.ret===10202?this.initGt(o.data,u=>{this.registerEmail(u)}):this.sendSuccess()}).catch(o=>{throw A.emit("toast",{msg:this.$t("web_3_email_sendfailed")}),o})},sendSuccess(){let e=60;const t=this;t.timeIntercal=window.setInterval(()=>{t.vcodeText=t.$t("web_3_resend",[e--]),e===-1&&(t.vcodeText=this.$t("web_3_register_codebtn"),e=60,clearInterval(t.timeIntercal))},1e3)},createdEmail(e={}){k("signin","signupbtn");const t=this.$parent.getEmailForm();this.emailVerify||(this.verifyMsg=this.$t("web_3_register_code"),this.createdEmailError=!0);let i={vcode:this.emailVerify,reason:"register_email",language:this.$i18n.locale,client:"webcs_WEB",client_app:`web_camscanner@${b.appVersion}`,client_id:this.client_id,timestamp:new Date().getTime(),jy_email:t.account,email:t.account};i=Object.assign(e,i),i.sign=S(N(i)),i.sign_type="md5",J(i).then(o=>{o.data&&o.data.success===1&&o.ret===10202&&this.initGt(o.data,u=>{this.createdEmail(u)})}).catch(o=>{throw this.verifyMsg=this.$t("web_3_login_invalidcode"),this.createdEmailError=!0,o})},checkEmailReg(){const e=this.$parent.getEmailForm();V({email:e.account}).then(()=>{k("signin","signup_active","signup_success"),k("signin","sign_up","sign_up_success"),clearInterval(this.regInterval),A.emit("toast",{msg:this.$t("web_3_register_success"),type:"success"}),this.$router.push("/login")}).catch(()=>{k("signin","signup_active","signup_failed"),k("signin","sign_up","sign_up_failed")})},emailBack(){clearInterval(this.regInterval),this.loginErrorShow=!1,this.$parent.emailBack()}}});const lt={class:"step_email"},ct={class:"login_main"},dt={class:"login_back"},mt={class:"login-text"},_t={class:"login_title"},ut={class:"been_sent"},pt={class:"login_input"},ht={class:"security_input"};function gt(e,t,i,o,u,g){const m=a("el-input"),l=a("el-button");return _(),f("div",lt,[s("div",ct,[s("div",dt,[s("i",{class:"cs-icon-arrow-left",onClick:t[0]||(t[0]=(...p)=>e.emailBack&&e.emailBack(...p))}),s("div",mt,[s("h2",_t,n(e.$t("web_3_register_emailverify")),1)])]),s("p",ut,n(e.$t("web_3_sign_secondtip",[""]))+" "+n(e.emailForm.account),1),s("div",pt,[s("div",ht,[r(m,{modelValue:e.emailVerify,"onUpdate:modelValue":t[1]||(t[1]=p=>e.emailVerify=p),modelModifiers:{trim:!0},onKeyup:E(e.registerEmail,["enter","native"]),autofocus:!0,placeholder:e.$t("web_3_register_code")},null,8,["modelValue","onKeyup","placeholder"]),r(l,{type:"text",disabled:e.vcodeText!=e.$t("web_3_register_codebtn"),onClick:e.registerEmail},{default:c(()=>[j(n(e.vcodeText),1)]),_:1},8,["disabled","onClick"])])]),K(s("div",{class:"login_error el-icon-warning"},n(e.verifyMsg),513),[[H,e.createdEmailError]]),s("div",{class:"btn_green login_btn_bottom",onClick:t[2]||(t[2]=(...p)=>e.createdEmail&&e.createdEmail(...p))},n(e.$t("web_3_register_btn")),1)])])}const ft=L(at,[["render",gt],["__scopeId","data-v-aeae24a2"]]),bt="register",wt=T({components:{mobileReg:Ae,emailReg:rt,emailStepReg:ft,loginHeader:me},data:function(){return{emailVerify:"",loginStep:"step_first",createdEmailError:!1,autoLogin:!1,checked:!1,robust:"",privacyDialog:!1,currentTab:0,loginType:"mobile_reg",hasKo:!1,loginErrorShow:!1}},props:{type:{type:String,default:""}},watch:{loginStep(){this.clickListener()},cfgObj:{immediate:!0,handler(e){e.ip_country&&e.ip_country==="kr"?this.hasKo=!0:this.privacyDialog=!0},deep:!0}},computed:{v3Host(){return b.macro.V3_MAIN_DOMAIN},hasElectron(){return ce()},cfgObj(){return _e().obj},isShowEmail(){return this.$i18n.locale!=="zh-cn"&&this.$i18n.locale!=="zh-tw"&&this.cfgObj&&this.cfgObj.ip_country!=="cn"}},mounted(){this.clickListener()},created(){k(bt,"pv"),this.checkLoginType("mobile_reg",0)},methods:{clickListener(){const e=this;this.$nextTick(()=>{document.getElementsByClassName("step_first")[0]&&document.getElementsByClassName("step_first")[0].addEventListener("click",function(t){const i=t.target;i.className==="desk_open"&&(t.stopPropagation(),t.preventDefault(),e.hasElectron&&window.desktopVersion&&Q(window.desktopVersion,"1.0.0")?window.ipcRenderer.send("open-window",i.getAttribute("href")):window.open(i.getAttribute("href")))})})},checkLoginType(e,t){this.loginType=e,this.currentTab=t,this.hasElectron&&window.desktopVersion&&Q(window.desktopVersion,"1.0.1")&&this.$route.name==="register"&&this.$nextTick(()=>{window.ipcRenderer.send("reSize-window",520,document.getElementsByClassName("step_first")[0].offsetHeight+300)})},checkLogin(){this.$emit("checkLogin")},agree(){this.$refs.emailReg.emailForm.checked=!0,this.$refs.mobileReg.mobileForm.checked=!0,this.privacyDialog=!1},createdEmail(){this.emailVerify||(this.createdEmailError=!0)},getEmailForm(){return this.$refs.emailReg.emailForm},emailStep(){this.loginStep="step_email"},emailBack(){this.loginErrorShow=!1,this.loginStep="step_first"}}});const z=e=>(P("data-v-7dd7d97b"),e=e(),q(),e),$t={class:"main"},vt=z(()=>s("img",{class:"login-logo",src:de,alt:""},null,-1)),yt={class:"register_wrap"},kt={class:"register_main"},Ct={class:"tab_text"},Ft=z(()=>s("i",null,null,-1)),Mt=z(()=>s("i",null,null,-1)),Et={class:"tab_content"},Vt={key:1,class:"privacy_dialog"},St={class:"dioalog_box"},It={class:"privacy_title"},Tt={class:"privacy_content"},Lt=["innerHTML"],Rt={class:"privacy_footer"};function Kt(e,t,i,o,u,g){const m=a("loginHeader"),l=a("mobileReg"),p=a("emailReg"),$=a("emailStepReg");return _(),f("div",$t,[!e.hasElectron&&!e.type?(_(),w(m,{key:0})):y("",!0),s("div",{class:M(["main_body_wrap",e.hasElectron?"electron_wrap":""]),style:{"-webkit-app-region":"drag"}},[vt,s("div",yt,[K(s("div",{class:M(["step_first",e.currentTab===1?"email_regs":""]),style:ie(e.type?"position: static;":"")},[s("div",kt,[s("div",Ct,[s("div",{class:M(["login_h1",e.loginType==="mobile_reg"?"login_select":""]),onClick:t[0]||(t[0]=v=>e.checkLoginType("mobile_reg",0))},[s("h1",null,n(e.$t("web_3_register_mobile")),1),Ft],2),e.isShowEmail?(_(),f("div",{key:0,class:M(["login_h1",e.loginType==="email_reg"?"login_select":""]),onClick:t[1]||(t[1]=v=>e.checkLoginType("email_reg",1))},[s("h1",null,n(e.$t("web_3_register_email")),1),Mt],2)):y("",!0)]),s("div",Et,[K(r(l,{hasKo:e.hasKo,ref:"mobileReg",onCheckLogin:e.checkLogin,type:e.type},null,8,["hasKo","onCheckLogin","type"]),[[H,e.loginType==="mobile_reg"]]),K(r(p,{hasKo:e.hasKo,ref:"emailReg",onCheckLogin:e.checkLogin,type:e.type},null,8,["hasKo","onCheckLogin","type"]),[[H,e.loginType==="email_reg"]])])])],6),[[H,e.loginStep==="step_first"]]),e.loginStep==="step_email"?(_(),w($,{key:0})):y("",!0),e.privacyDialog&&!e.hasKo?(_(),f("div",Vt,[s("div",St,[s("div",It,[s("h3",null,n(e.$t("web_3_notice")),1)]),s("div",Tt,[s("p",{innerHTML:e.$t("web_3_protocol_desc_1",[`<a target='_blank' href='${e.v3Host}/web/privacy?language=${e.$i18n.locale}'>${e.$t("web_3_protocol_desc_1_1")}</a>`])},null,8,Lt),s("p",null,n(e.$t("web_3_protocol_desc_2")),1),s("p",null,n(e.$t("web_3_protocol_desc_3")),1),s("p",null,n(e.$t("web_3_protocol_desc_4")),1)]),s("div",Rt,[s("span",{class:"btn_warn",onClick:t[2]||(t[2]=v=>e.privacyDialog=!1)},n(e.$t("web_3_disagree")),1),s("span",{class:"btn_primary",onClick:t[3]||(t[3]=(...v)=>e.agree&&e.agree(...v))},n(e.$t("web_3_agree")),1)])])])):y("",!0)])],2)])}const zt=L(wt,[["render",Kt],["__scopeId","data-v-7dd7d97b"]]);export{zt as default};
